import './order-list.less';

import React from 'react';
import { Alert, Button, Col, Form, Input, Pagination, Select, Spin } from 'antd';
import OrderCard from '../order-card/order-card';
import UrlBuilder from '../../common/url-builder/url-builder';
import Ajax from '../../common/ajax/ajax';

const Option = Select.Option;
const InputGroup = Input.Group;
const FormItem = Form.Item;

export default class OrderList extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      error: props.callingNo ? '' : 'pleaseSearch',
      loading: false,
      orderType: 'bizOrderId',
      mobileType: 'orderMobile',
      mobileNo: props.callingNo,
      orderNo: '',
      orders: [],
      expandId: 0, // å±•å¼€çš„è®¢å•id
      pagination: {
        pageNum: 1,
        pageSize: props.callingNo ? 3 : 5,
        totalItem: 0,
      },
    };
    if(this.props.callingNo) this.query();
  }
  expandChange(id) {
    if (id === this.state.expandId) {
      this.setState({ expandId: 0 }); // æ”¶èµ·
    } else {
      this.setState({ expandId: id });
    }
  }
  orderTypeChange(value) {
    this.setState({ orderType: value });
  }
  orderNoChange(event) {
    this.setState({ orderNo: event.target.value });
  }
  mobileTypeChange(value) {
    this.setState({ mobileType: value });
  }
  mobileNoChange(event) {
    this.setState({ mobileNo: event.target.value });
  }
  pageNumChange(pageNum) {
    this.setState({
      loading: true,
      pagination: {
        ...this.state.pagination,
        pageNum,
      },
    }, () => this.query(pageNum));
  }
  pageSizeChange(pageNum, pageSize) {
    this.setState({
      loading: true,
      pagination: {
        ...this.state.pagination,
        pageSize,
        pageNum: 1,
      },
    }, this.query);
  }
  query(pageNum) {
    if(!this.state.orderNo && !this.state.mobileNo) {
      this.setState({
        error: 'paramsError',
        loading: false,
      });
      return;
    }

    const pagination = {
      pageNum: pageNum || this.state.pagination.pageNum,
      pageSize: this.state.pagination.pageSize,
    }
    const params = {
      operator: this.props.userId,
      pageNum: pagination.pageNum,
      pageSize: pagination.pageSize,
    }
    params[this.state.orderType] = this.state.orderNo;
    params[this.state.mobileType] = this.state.mobileNo;

    const requestUrl = UrlBuilder.buildApiUrl('/trade/crm/order/queryOrderList');
    Ajax.post(requestUrl, {
      body: params,
    }).then((json) => {
      // json = {"entry":[{"acceptTime":1471352177000,"addressSnapshot":"5æ ‹1å•å…ƒ501-1","area":null,"attributes":"{\"platformCode\":1,\"xiaoErMobile\":13764807121,\"cityName\":\"æ­å·\",\"deliveryName\":\"éƒ­å®—å®—\",\"xiaoErId\":1787127,\"confirmTime\":\"2016-08-17 09:26:44\",\"buyerCity\":\"æ­å·\",\"deliveryMobile\":\"17079011878\",\"scFreightCharge\":300,\"confirmDeliveryUser\":\"126429685\",\"platformName\":\"ç”Ÿæ´»åŠå¾„\",\"managerMobile\":18768186553,\"sendUser\":\"126429685\",\"deliveryServiceCharge\":200,\"shopCity\":\"æ­å·\",\"confirmDeliveryTime\":\"2016-08-16 21:26:31\",\"deliveryType\":3,\"sendTime\":\"2016-08-16 20:57:06\",\"isPreSale\":false,\"orderMobile\":15397092749,\"acceptUser\":2113754,\"shopType\":1,\"xiaoErNick\":\"æ±Ÿç¾Šç¾Š\",\"deliveryId\":126429685,\"orderNick\":\"meikidd\",\"acceptTime\":\"2016-08-16 20:56:17\",\"shopName\":\"åä¸½è¶…å¸‚\",\"managerId\":1929980,\"confirmUser\":-1,\"managerNick\":\"é»„æ¶¦çƒ½\",\"itemKinds\":3,\"sellerMobile\":18957154818}","bizOrderId":42592682544,"buyAmount":4,"buyer2uspayId":17363720,"buyer2uspayTime":1471352127000,"buyerCity":"æ­å·","buyerId":126402544,"buyerNick":"æ¢…æ™´å…‰","buyerOrderFunds":[],"cancelTime":null,"cancelUser":null,"cancelledBy":null,"cardList":null,"cityCode":330100,"cityName":"æ­å·","comment":"","commissionFee":0,"community":"è¥¿æºªèŠ±å›­ç«èˆŸè‹‘","communityId":null,"confirmDeliveryTime":1471353991000,"confirmedBySystem":null,"customerReminderMark":null,"dailySequence":84,"deductFreightCharge":null,"deliveryCode":5545,"deliveryDeduct":0,"deliveryLogisticsnos":null,"deliveryType":3,"deliveryerMobile":17079011878,"deliveryerName":"éƒ­å®—å®—","evalCount":null,"evalExpire":null,"ext":{},"feature":null,"freightCharge":null,"freightChargeFakeReduce":null,"gmtCreate":1471352109000,"groupCurCount":null,"groupDetailUrl":null,"groupFullTime":null,"groupGmtCreate":null,"groupId":null,"groupMin":null,"groupPeopleCount":null,"groupPlanOverTime":null,"groupShareAbstract":null,"groupShareTitle":null,"groupStatus":null,"isAccept":1,"isCanCancelOrder":false,"isCanRefundRequest":false,"isDeleted":0,"isDownloadOrderForLogistics":false,"isOfficialPreSale":false,"isPreSale":false,"isResendOrder":false,"isTryCity":null,"itemId":101195697,"itemName":"åƒç¦§åœ£å¥³æœã€ä¹°ä¸€èµ ä¸€ã€‘,æ²³åŒ—çš‡å† æ¢¨ã€ä¹°ä¸€èµ ä¸€ã€‘,å‰ç¦„èŠ’æœã€ä¹°ä¸€èµ ä¸€ã€‘","itemSumPrice":0,"landmarkId":1214307,"lastOpUserId":-1,"lastOpUserName":null,"logisticsCompanyCodeMap":{},"logisticsCompanyName":null,"logisticsDOList":[],"logisticsNo":null,"logisticsStatus":3,"managerMobile":18768186553,"managerNick":"é»„æ¶¦çƒ½","marketActivityId":null,"mobile":15397092749,"notArriveOnTime":0,"notCountSmallCharge":0,"notSendGoodOnTime":0,"notSendOrderReason":null,"onlinePayType":2,"openid":null,"orderEval":null,"orderFunds":null,"orderMobile":15397092749,"orderNick":"meikidd","orderType":1,"originalPrice":3760,"outOrderId":"201608162055091264025449972","payDeadline":null,"payStatus":2,"payTime":null,"payType":2,"platformCode":1,"platformName":"ç”Ÿæ´»åŠå¾„","preSalePullBackTime":null,"preSaleSendEndTime":null,"preSaleSendStartTime":null,"promotionPrice":3760,"property":null,"psf":0,"reduce":0,"reduceId":0,"refundCount":0,"refundInfo":null,"refundReceived":false,"refundRequestInfo":null,"refundRequestStatus":null,"refundStatus":null,"refundStatusStr":null,"refundSuccessDatetime":null,"rejectReason":null,"rejectValue":null,"reminderMarkCount":null,"scFreightCharge":null,"sellerBenefit":0,"sellerCouponSubsidy":0,"sellerFullReduceSubsidy":0,"sellerMobile":null,"sellerNick":null,"sellerOrderFunds":[],"sellerPackageSubsidy":0,"sellerPsfSubsidy":0,"sellerSpecialSubsidy":0,"sendLogisticsnos":null,"sendTime":1471352226000,"shopCouponId":0,"shopCouponPrice":0,"shopId":9972,"shopName":"åä¸½è¶…å¸‚","shopType":1,"status":4,"subOrders":[{"bizOrderId":70633782544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1471352109000,"isCombinationItem":null,"isDeleted":0,"itemId":101195337,"itemName":"æ²³åŒ—çš‡å† æ¢¨ã€ä¹°ä¸€èµ ä¸€ã€‘","itemOriginPrice":null,"itemPicUrl":"n/08/12/1470984151480_1356.jpg","itemPrice":890,"mobile":"15397092749","parentOrderId":42592682544,"property":"1ç›’2ä¸ªï¼Œçº¦400gï¼›ä¹°ä¸€ç›’é€ä¸€ç›’","shopId":9972,"skuId":null,"totalPrice":890,"type":1,"unit":"ä»½"},{"bizOrderId":70634782544,"buyAmount":2,"combinationItemInfo":[],"communityId":null,"gmtCreate":1471352109000,"isCombinationItem":null,"isDeleted":0,"itemId":101195311,"itemName":"å‰ç¦„èŠ’æœã€ä¹°ä¸€èµ ä¸€ã€‘","itemOriginPrice":null,"itemPicUrl":"n/08/09/1470737014042_6463.jpg","itemPrice":990,"mobile":"15397092749","parentOrderId":42592682544,"property":"çº¦250-300gï¼›ä¹°ä¸€ä¸ªé€ä¸€ä¸ª","shopId":9972,"skuId":null,"totalPrice":1980,"type":1,"unit":"ä»½"},{"bizOrderId":70642782544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1471352109000,"isCombinationItem":null,"isDeleted":0,"itemId":101195697,"itemName":"åƒç¦§åœ£å¥³æœã€ä¹°ä¸€èµ ä¸€ã€‘","itemOriginPrice":null,"itemPicUrl":"n/08/12/1470984515336_7340.jpg","itemPrice":890,"mobile":"15397092749","parentOrderId":42592682544,"property":"1ç›’ï¼Œçº¦300gï¼›ä¹°ä¸€ç›’é€ä¸€ç›’","shopId":9972,"skuId":null,"totalPrice":890,"type":1,"unit":"ä»½"}],"sysDate":1473240783553,"timeline":[],"totalPrice":3760,"tradeSuccessDatetime":1471397205000,"unit":null,"us2SellerPayBlockedType":null,"us2sellerpayId":null,"us2sellerpayStatus":0,"us2sellerpayTime":null,"validTime":1471352127000,"xiaoErId":1787127,"xiaoErMobile":13764807121,"xiaoErNick":"æ±Ÿç¾Šç¾Š"},{"acceptTime":1470835434000,"addressSnapshot":"è’‹æ‘å•†åŠ¡ä¸­å¿ƒB1åº§5æ¥¼ é—ªç”µè´­","area":null,"attributes":"{\"platformCode\":1,\"xiaoErMobile\":13764807121,\"cityName\":\"æ­å·\",\"deliveryName\":\"ç‹ä¼Ÿ\",\"deductFreightCharge\":0,\"xiaoErId\":1787127,\"confirmTime\":\"2016-08-11 09:42:38\",\"buyerCity\":\"æ­å·\",\"deliveryMobile\":\"15988404064\",\"scFreightCharge\":300,\"confirmDeliveryUser\":\"126429685\",\"managerMobile\":18768186553,\"platformName\":\"ç”Ÿæ´»åŠå¾„\",\"sendUser\":\"126429685\",\"shopCity\":\"æ­å·\",\"freightCharge\":300,\"confirmDeliveryTime\":\"2016-08-10 21:42:35\",\"userPayFreightCharge\":300,\"deliveryType\":3,\"sendTime\":\"2016-08-10 21:30:28\",\"isPreSale\":false,\"orderMobile\":15397092749,\"acceptUser\":2113754,\"shopType\":1,\"xiaoErNick\":\"æ±Ÿç¾Šç¾Š\",\"deliveryId\":126429685,\"acceptTime\":\"2016-08-10 21:23:54\",\"orderNick\":\"meikidd\",\"shopName\":\"åä¸½è¶…å¸‚\",\"managerId\":1929980,\"confirmUser\":-1,\"managerNick\":\"é»„æ¶¦çƒ½\",\"itemKinds\":3,\"sellerMobile\":18957154818}","bizOrderId":42198612544,"buyAmount":3,"buyer2uspayId":17338184,"buyer2uspayTime":1470835371000,"buyerCity":"æ­å·","buyerId":126402544,"buyerNick":"æ¢…æ™´å…‰","buyerOrderFunds":[],"cancelTime":null,"cancelUser":null,"cancelledBy":null,"cardList":null,"cityCode":330100,"cityName":"æ­å·","comment":"","commissionFee":0,"community":"æ­å·è’‹æ‘å•†åŠ¡ä¸­å¿ƒ","communityId":null,"confirmDeliveryTime":1470836555000,"confirmedBySystem":null,"customerReminderMark":null,"dailySequence":114,"deductFreightCharge":null,"deliveryCode":6885,"deliveryDeduct":0,"deliveryLogisticsnos":null,"deliveryType":3,"deliveryerMobile":15988404064,"deliveryerName":"ç‹ä¼Ÿ","evalCount":null,"evalExpire":null,"ext":{},"feature":null,"freightCharge":null,"freightChargeFakeReduce":null,"gmtCreate":1470835361000,"groupCurCount":null,"groupDetailUrl":null,"groupFullTime":null,"groupGmtCreate":null,"groupId":null,"groupMin":null,"groupPeopleCount":null,"groupPlanOverTime":null,"groupShareAbstract":null,"groupShareTitle":null,"groupStatus":null,"isAccept":1,"isCanCancelOrder":false,"isCanRefundRequest":false,"isDeleted":0,"isDownloadOrderForLogistics":false,"isOfficialPreSale":false,"isPreSale":false,"isResendOrder":false,"isTryCity":null,"itemId":100978551,"itemName":"å…«å®ç²¥,ä¹äº‹æ„å¤§åˆ©é¦™æµ“çº¢çƒ©å‘³è–¯ç‰‡,ä¹äº‹è–¯ç‰‡ç¾å›½ç»å…¸åŸå‘³","itemSumPrice":0,"landmarkId":1270365,"lastOpUserId":-1,"lastOpUserName":null,"logisticsCompanyCodeMap":{},"logisticsCompanyName":null,"logisticsDOList":[],"logisticsNo":null,"logisticsStatus":3,"managerMobile":18768186553,"managerNick":"é»„æ¶¦çƒ½","marketActivityId":null,"mobile":15397092749,"notArriveOnTime":0,"notCountSmallCharge":0,"notSendGoodOnTime":0,"notSendOrderReason":null,"onlinePayType":2,"openid":null,"orderEval":null,"orderFunds":null,"orderMobile":15397092749,"orderNick":"meikidd","orderType":1,"originalPrice":2150,"outOrderId":"201608102122411264025449972","payDeadline":null,"payStatus":2,"payTime":null,"payType":2,"platformCode":1,"platformName":"ç”Ÿæ´»åŠå¾„","preSalePullBackTime":null,"preSaleSendEndTime":null,"preSaleSendStartTime":null,"promotionPrice":2150,"property":null,"psf":0,"reduce":0,"reduceId":0,"refundCount":0,"refundInfo":null,"refundReceived":false,"refundRequestInfo":null,"refundRequestStatus":null,"refundStatus":null,"refundStatusStr":null,"refundSuccessDatetime":null,"rejectReason":null,"rejectValue":null,"reminderMarkCount":null,"scFreightCharge":null,"sellerBenefit":0,"sellerCouponSubsidy":0,"sellerFullReduceSubsidy":0,"sellerMobile":null,"sellerNick":null,"sellerOrderFunds":[],"sellerPackageSubsidy":0,"sellerPsfSubsidy":0,"sellerSpecialSubsidy":0,"sendLogisticsnos":null,"sendTime":1470835828000,"shopCouponId":0,"shopCouponPrice":0,"shopId":9972,"shopName":"åä¸½è¶…å¸‚","shopType":1,"status":4,"subOrders":[{"bizOrderId":69491052544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1470835361000,"isCombinationItem":null,"isDeleted":0,"itemId":100925715,"itemName":"[ç™¾äº‹]ä¹äº‹æ„å¤§åˆ©é¦™æµ“çº¢çƒ©å‘³è–¯ç‰‡","itemOriginPrice":null,"itemPicUrl":"n/04/19/1461041515453_5908.jpg","itemPrice":750,"mobile":"15397092749","parentOrderId":42198612544,"property":"70g","shopId":9972,"skuId":null,"totalPrice":750,"type":1,"unit":"è¢‹"},{"bizOrderId":69492052544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1470835361000,"isCombinationItem":null,"isDeleted":0,"itemId":100925475,"itemName":"[ç™¾äº‹]ä¹äº‹è–¯ç‰‡ç¾å›½ç»å…¸åŸå‘³","itemOriginPrice":null,"itemPicUrl":"n/01/23/1453509619038_1917.jpg","itemPrice":710,"mobile":"15397092749","parentOrderId":42198612544,"property":"75g","shopId":9972,"skuId":null,"totalPrice":710,"type":1,"unit":"è¢‹"},{"bizOrderId":69490052544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1470835361000,"isCombinationItem":null,"isDeleted":0,"itemId":100978551,"itemName":"[å¨ƒå“ˆå“ˆ]å…«å®ç²¥","itemOriginPrice":null,"itemPicUrl":"n/01/22/1453462146754_2746.jpg","itemPrice":390,"mobile":"15397092749","parentOrderId":42198612544,"property":"360ml","shopId":9972,"skuId":null,"totalPrice":390,"type":1,"unit":"ç“¶"}],"sysDate":1473240783553,"timeline":[],"totalPrice":2150,"tradeSuccessDatetime":1470879759000,"unit":null,"us2SellerPayBlockedType":null,"us2sellerpayId":null,"us2sellerpayStatus":0,"us2sellerpayTime":null,"validTime":1470835371000,"xiaoErId":1787127,"xiaoErMobile":13764807121,"xiaoErNick":"æ±Ÿç¾Šç¾Š"},{"acceptTime":1470743121000,"addressSnapshot":"è’‹æ‘è¡—é“ç´«éœè¡— è’‹æ‘å•†åŠ¡ä¸­å¿ƒ B1æ ‹5æ¥¼","area":null,"attributes":"{\"platformCode\":1,\"xiaoErMobile\":13764807121,\"outWayViewId\":\"2160516907533565\",\"cityName\":\"æ­å·\",\"deliveryName\":\"æ›¹å¥\",\"xiaoErId\":1787127,\"confirmTime\":\"2016-08-10 08:23:00\",\"outWayShopId\":\"128612333\",\"deliveryMobile\":\"15836238533\",\"scFreightCharge\":300,\"confirmDeliveryUser\":\"126429685\",\"managerMobile\":18768186553,\"platformName\":\"ç”Ÿæ´»åŠå¾„\",\"sendUser\":\"126429685\",\"deliveryServiceCharge\":200,\"shopCity\":\"æ­å·\",\"outDeliveryPrice\":\"0\",\"confirmDeliveryTime\":\"2016-08-09 20:22:57\",\"deliveryType\":3,\"outOriginPrice\":\"6300\",\"outWayId\":\"2160516907533565\",\"outTotalPrice\":\"6300\",\"sendTime\":\"2016-08-09 19:49:25\",\"isPreSale\":false,\"acceptUser\":2113754,\"orderMobile\":15397092749,\"shopType\":1,\"deliveryId\":126429685,\"xiaoErNick\":\"æ±Ÿç¾Šç¾Š\",\"acceptTime\":\"2016-08-09 19:45:21\",\"shopName\":\"åä¸½è¶…å¸‚\",\"managerId\":1929980,\"outWay\":\"10\",\"confirmUser\":-1,\"managerNick\":\"é»„æ¶¦çƒ½\",\"itemKinds\":1,\"sellerMobile\":18957154818}","bizOrderId":42212328785,"buyAmount":1,"buyer2uspayId":17332932,"buyer2uspayTime":1470743078000,"buyerCity":null,"buyerId":126748785,"buyerNick":"æ¢…æ™´å…‰","buyerOrderFunds":[],"cancelTime":null,"cancelUser":null,"cancelledBy":null,"cardList":null,"cityCode":330100,"cityName":"æ­å·","comment":null,"commissionFee":0,"community":"","communityId":null,"confirmDeliveryTime":1470745377000,"confirmedBySystem":null,"customerReminderMark":null,"dailySequence":343,"deductFreightCharge":null,"deliveryCode":2810,"deliveryDeduct":0,"deliveryLogisticsnos":null,"deliveryType":3,"deliveryerMobile":15836238533,"deliveryerName":"æ›¹å¥","evalCount":null,"evalExpire":null,"ext":{},"feature":null,"freightCharge":null,"freightChargeFakeReduce":null,"gmtCreate":1470743078000,"groupCurCount":null,"groupDetailUrl":null,"groupFullTime":null,"groupGmtCreate":null,"groupId":null,"groupMin":null,"groupPeopleCount":null,"groupPlanOverTime":null,"groupShareAbstract":null,"groupShareTitle":null,"groupStatus":null,"isAccept":1,"isCanCancelOrder":false,"isCanRefundRequest":false,"isDeleted":0,"isDownloadOrderForLogistics":false,"isOfficialPreSale":false,"isPreSale":false,"isResendOrder":false,"isTryCity":null,"itemId":100779171,"itemName":"çº¯ç‰›å¥¶","itemSumPrice":0,"landmarkId":0,"lastOpUserId":-1,"lastOpUserName":null,"logisticsCompanyCodeMap":{},"logisticsCompanyName":null,"logisticsDOList":[],"logisticsNo":null,"logisticsStatus":3,"managerMobile":18768186553,"managerNick":"é»„æ¶¦çƒ½","marketActivityId":null,"mobile":15397092749,"notArriveOnTime":0,"notCountSmallCharge":0,"notSendGoodOnTime":0,"notSendOrderReason":null,"onlinePayType":12,"openid":null,"orderEval":null,"orderFunds":null,"orderMobile":null,"orderNick":null,"orderType":1,"originalPrice":6500,"outOrderId":"201608091944381267487859972","payDeadline":null,"payStatus":2,"payTime":null,"payType":2,"platformCode":1,"platformName":"ç”Ÿæ´»åŠå¾„","preSalePullBackTime":null,"preSaleSendEndTime":null,"preSaleSendStartTime":null,"promotionPrice":6500,"property":null,"psf":0,"reduce":0,"reduceId":0,"refundCount":0,"refundInfo":null,"refundReceived":false,"refundRequestInfo":null,"refundRequestStatus":null,"refundStatus":null,"refundStatusStr":null,"refundSuccessDatetime":null,"rejectReason":null,"rejectValue":null,"reminderMarkCount":null,"scFreightCharge":null,"sellerBenefit":0,"sellerCouponSubsidy":0,"sellerFullReduceSubsidy":0,"sellerMobile":null,"sellerNick":null,"sellerOrderFunds":[],"sellerPackageSubsidy":0,"sellerPsfSubsidy":0,"sellerSpecialSubsidy":0,"sendLogisticsnos":null,"sendTime":1470743365000,"shopCouponId":0,"shopCouponPrice":0,"shopId":9972,"shopName":"åä¸½è¶…å¸‚","shopType":1,"status":4,"subOrders":[{"bizOrderId":69249768785,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1470743078000,"isCombinationItem":null,"isDeleted":0,"itemId":100779171,"itemName":"[è’™ç‰›]çº¯ç‰›å¥¶","itemOriginPrice":null,"itemPicUrl":"n/12/29/1451369069336_4208.jpg","itemPrice":6500,"mobile":"15397092749","parentOrderId":42212328785,"property":"250ml*24ç›’","shopId":9972,"skuId":null,"totalPrice":6500,"type":1,"unit":"ç®±"}],"sysDate":1473240783553,"timeline":[],"totalPrice":6500,"tradeSuccessDatetime":1470788581000,"unit":null,"us2SellerPayBlockedType":null,"us2sellerpayId":null,"us2sellerpayStatus":0,"us2sellerpayTime":null,"validTime":1470743078000,"xiaoErId":1787127,"xiaoErMobile":13764807121,"xiaoErNick":"æ±Ÿç¾Šç¾Š"},{"acceptTime":1470717134000,"addressSnapshot":"è’‹æ‘è¡—é“ç´«éœè¡— è’‹æ‘å•†åŠ¡ä¸­å¿ƒ B1æ ‹5æ¥¼","area":null,"attributes":"{\"platformCode\":1,\"xiaoErMobile\":13764807121,\"outWayViewId\":\"2157866112103565\",\"cityName\":\"æ­å·\",\"deliveryName\":\"å‘¨é’æ¾\",\"xiaoErId\":1787127,\"confirmTime\":\"2016-08-10 00:49:30\",\"outWayShopId\":\"128612333\",\"deliveryMobile\":\"13461043194\",\"scFreightCharge\":300,\"confirmDeliveryUser\":\"126429685\",\"managerMobile\":18768186553,\"platformName\":\"ç”Ÿæ´»åŠå¾„\",\"sendUser\":\"126429685\",\"deliveryServiceCharge\":200,\"shopCity\":\"æ­å·\",\"outDeliveryPrice\":\"0\",\"confirmDeliveryTime\":\"2016-08-09 12:49:30\",\"deliveryType\":3,\"outOriginPrice\":\"10780\",\"outWayId\":\"2157866112103565\",\"outTotalPrice\":\"10780\",\"sendTime\":\"2016-08-09 12:37:25\",\"isPreSale\":false,\"acceptUser\":2113754,\"orderMobile\":15397092749,\"shopType\":1,\"deliveryId\":126429685,\"xiaoErNick\":\"æ±Ÿç¾Šç¾Š\",\"acceptTime\":\"2016-08-09 12:32:14\",\"shopName\":\"åä¸½è¶…å¸‚\",\"managerId\":1929980,\"outWay\":\"10\",\"confirmUser\":-1,\"managerNick\":\"é»„æ¶¦çƒ½\",\"itemKinds\":1,\"sellerMobile\":18957154818}","bizOrderId":42173358785,"buyAmount":2,"buyer2uspayId":17329162,"buyer2uspayTime":1470717102000,"buyerCity":null,"buyerId":126748785,"buyerNick":"æ¢…æ™´å…‰","buyerOrderFunds":[],"cancelTime":null,"cancelUser":null,"cancelledBy":null,"cardList":null,"cityCode":330100,"cityName":"æ­å·","comment":null,"commissionFee":0,"community":"","communityId":null,"confirmDeliveryTime":1470718170000,"confirmedBySystem":null,"customerReminderMark":null,"dailySequence":172,"deductFreightCharge":null,"deliveryCode":9050,"deliveryDeduct":0,"deliveryLogisticsnos":null,"deliveryType":3,"deliveryerMobile":13461043194,"deliveryerName":"å‘¨é’æ¾","evalCount":null,"evalExpire":null,"ext":{},"feature":null,"freightCharge":null,"freightChargeFakeReduce":null,"gmtCreate":1470717102000,"groupCurCount":null,"groupDetailUrl":null,"groupFullTime":null,"groupGmtCreate":null,"groupId":null,"groupMin":null,"groupPeopleCount":null,"groupPlanOverTime":null,"groupShareAbstract":null,"groupShareTitle":null,"groupStatus":null,"isAccept":1,"isCanCancelOrder":false,"isCanRefundRequest":false,"isDeleted":0,"isDownloadOrderForLogistics":false,"isOfficialPreSale":false,"isPreSale":false,"isResendOrder":false,"isTryCity":null,"itemId":101049667,"itemName":"ç‰¹ä»‘è‹æœ‰æœºçº¯ç‰›å¥¶","itemSumPrice":0,"landmarkId":0,"lastOpUserId":-1,"lastOpUserName":null,"logisticsCompanyCodeMap":{},"logisticsCompanyName":null,"logisticsDOList":[],"logisticsNo":null,"logisticsStatus":3,"managerMobile":18768186553,"managerNick":"é»„æ¶¦çƒ½","marketActivityId":null,"mobile":15397092749,"notArriveOnTime":0,"notCountSmallCharge":0,"notSendGoodOnTime":0,"notSendOrderReason":null,"onlinePayType":12,"openid":null,"orderEval":null,"orderFunds":null,"orderMobile":null,"orderNick":null,"orderType":1,"originalPrice":15600,"outOrderId":"201608091231421267487859972","payDeadline":null,"payStatus":2,"payTime":null,"payType":2,"platformCode":1,"platformName":"ç”Ÿæ´»åŠå¾„","preSalePullBackTime":null,"preSaleSendEndTime":null,"preSaleSendStartTime":null,"promotionPrice":15600,"property":null,"psf":0,"reduce":0,"reduceId":0,"refundCount":0,"refundInfo":null,"refundReceived":false,"refundRequestInfo":null,"refundRequestStatus":null,"refundStatus":null,"refundStatusStr":null,"refundSuccessDatetime":null,"rejectReason":null,"rejectValue":null,"reminderMarkCount":null,"scFreightCharge":null,"sellerBenefit":0,"sellerCouponSubsidy":0,"sellerFullReduceSubsidy":0,"sellerMobile":null,"sellerNick":null,"sellerOrderFunds":[],"sellerPackageSubsidy":0,"sellerPsfSubsidy":0,"sellerSpecialSubsidy":0,"sendLogisticsnos":null,"sendTime":1470717445000,"shopCouponId":0,"shopCouponPrice":0,"shopId":9972,"shopName":"åä¸½è¶…å¸‚","shopType":1,"status":4,"subOrders":[{"bizOrderId":69110488785,"buyAmount":2,"combinationItemInfo":[],"communityId":null,"gmtCreate":1470717102000,"isCombinationItem":null,"isDeleted":0,"itemId":101049667,"itemName":"[è’™ç‰›]ç‰¹ä»‘è‹æœ‰æœºçº¯ç‰›å¥¶","itemOriginPrice":null,"itemPicUrl":"n/01/22/1453463154909_9041.jpg","itemPrice":7800,"mobile":"15397092749","parentOrderId":42173358785,"property":"250ml*12ç›’","shopId":9972,"skuId":null,"totalPrice":15600,"type":1,"unit":"ç®±"}],"sysDate":1473240783553,"timeline":[],"totalPrice":15600,"tradeSuccessDatetime":1470761371000,"unit":null,"us2SellerPayBlockedType":null,"us2sellerpayId":null,"us2sellerpayStatus":0,"us2sellerpayTime":null,"validTime":1470717102000,"xiaoErId":1787127,"xiaoErMobile":13764807121,"xiaoErNick":"æ±Ÿç¾Šç¾Š"},{"acceptTime":1470717005000,"addressSnapshot":"è’‹æ‘è¡—é“ç´«éœè¡— è’‹æ‘å•†åŠ¡ä¸­å¿ƒ B1æ ‹5æ¥¼","area":null,"attributes":"{\"platformCode\":1,\"xiaoErMobile\":13764807121,\"outWayViewId\":\"2157855312633565\",\"cityName\":\"æ­å·\",\"deliveryName\":\"å‘¨é’æ¾\",\"xiaoErId\":1787127,\"deductFreightCharge\":0,\"confirmTime\":\"2016-08-10 00:49:45\",\"outWayShopId\":\"128612333\",\"deliveryMobile\":\"13461043194\",\"scFreightCharge\":300,\"confirmDeliveryUser\":\"126429685\",\"platformName\":\"ç”Ÿæ´»åŠå¾„\",\"managerMobile\":18768186553,\"sendUser\":\"126429685\",\"shopCity\":\"æ­å·\",\"freightCharge\":300,\"outDeliveryPrice\":\"0\",\"confirmDeliveryTime\":\"2016-08-09 12:49:33\",\"userPayFreightCharge\":300,\"deliveryType\":3,\"outOriginPrice\":\"7140\",\"outWayId\":\"2157855312633565\",\"outTotalPrice\":\"2280\",\"sendTime\":\"2016-08-09 12:35:33\",\"isPreSale\":false,\"acceptUser\":2113754,\"orderMobile\":15397092749,\"shopType\":1,\"xiaoErNick\":\"æ±Ÿç¾Šç¾Š\",\"deliveryId\":126429685,\"acceptTime\":\"2016-08-09 12:30:05\",\"shopName\":\"åä¸½è¶…å¸‚\",\"managerId\":1929980,\"outWay\":\"10\",\"confirmUser\":-1,\"managerNick\":\"é»„æ¶¦çƒ½\",\"itemKinds\":2,\"sellerMobile\":18957154818}","bizOrderId":42145428785,"buyAmount":2,"buyer2uspayId":17329124,"buyer2uspayTime":1470716960000,"buyerCity":null,"buyerId":126748785,"buyerNick":"æ¢…æ™´å…‰","buyerOrderFunds":[],"cancelTime":null,"cancelUser":null,"cancelledBy":null,"cardList":null,"cityCode":330100,"cityName":"æ­å·","comment":null,"commissionFee":0,"community":"","communityId":null,"confirmDeliveryTime":1470718173000,"confirmedBySystem":null,"customerReminderMark":null,"dailySequence":169,"deductFreightCharge":null,"deliveryCode":8155,"deliveryDeduct":0,"deliveryLogisticsnos":null,"deliveryType":3,"deliveryerMobile":13461043194,"deliveryerName":"å‘¨é’æ¾","evalCount":null,"evalExpire":null,"ext":{},"feature":null,"freightCharge":null,"freightChargeFakeReduce":null,"gmtCreate":1470716960000,"groupCurCount":null,"groupDetailUrl":null,"groupFullTime":null,"groupGmtCreate":null,"groupId":null,"groupMin":null,"groupPeopleCount":null,"groupPlanOverTime":null,"groupShareAbstract":null,"groupShareTitle":null,"groupStatus":null,"isAccept":1,"isCanCancelOrder":false,"isCanRefundRequest":false,"isDeleted":0,"isDownloadOrderForLogistics":false,"isOfficialPreSale":false,"isPreSale":false,"isResendOrder":false,"isTryCity":null,"itemId":101107259,"itemName":"ã€ä¹°ä¸€èµ ä¸€ã€‘å‰ç¦„èŠ’æœ,ã€ä¹°ä¸€èµ ä¸€ã€‘æ¸…é£ åŸæœ¨çº¯å“2å±‚150æŠ½*4åŒ…è½¯åŒ…æŠ½å–é¢çº¸å·¾","itemSumPrice":0,"landmarkId":0,"lastOpUserId":-1,"lastOpUserName":null,"logisticsCompanyCodeMap":{},"logisticsCompanyName":null,"logisticsDOList":[],"logisticsNo":null,"logisticsStatus":3,"managerMobile":18768186553,"managerNick":"é»„æ¶¦çƒ½","marketActivityId":null,"mobile":15397092749,"notArriveOnTime":0,"notCountSmallCharge":0,"notSendGoodOnTime":0,"notSendOrderReason":null,"onlinePayType":12,"openid":null,"orderEval":null,"orderFunds":null,"orderMobile":null,"orderNick":null,"orderType":1,"originalPrice":3870,"outOrderId":"201608091229201267487859972","payDeadline":null,"payStatus":2,"payTime":null,"payType":2,"platformCode":1,"platformName":"ç”Ÿæ´»åŠå¾„","preSalePullBackTime":null,"preSaleSendEndTime":null,"preSaleSendStartTime":null,"promotionPrice":2580,"property":null,"psf":0,"reduce":0,"reduceId":0,"refundCount":0,"refundInfo":null,"refundReceived":false,"refundRequestInfo":null,"refundRequestStatus":null,"refundStatus":null,"refundStatusStr":null,"refundSuccessDatetime":null,"rejectReason":null,"rejectValue":null,"reminderMarkCount":null,"scFreightCharge":null,"sellerBenefit":0,"sellerCouponSubsidy":0,"sellerFullReduceSubsidy":0,"sellerMobile":null,"sellerNick":null,"sellerOrderFunds":[],"sellerPackageSubsidy":0,"sellerPsfSubsidy":0,"sellerSpecialSubsidy":0,"sendLogisticsnos":null,"sendTime":1470717333000,"shopCouponId":0,"shopCouponPrice":0,"shopId":9972,"shopName":"åä¸½è¶…å¸‚","shopType":1,"status":4,"subOrders":[{"bizOrderId":69066688785,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1470716960000,"isCombinationItem":null,"isDeleted":0,"itemId":101123402,"itemName":"[æ¸…é£]ã€ä¹°ä¸€èµ ä¸€ã€‘æ¸…é£ åŸæœ¨çº¯å“2å±‚150æŠ½*4åŒ…è½¯åŒ…æŠ½å–é¢çº¸å·¾","itemOriginPrice":2580,"itemPicUrl":"n/01/22/1453462103551_7665.jpg","itemPrice":1290,"mobile":"15397092749","parentOrderId":42145428785,"property":"2å±‚150æŠ½*4åŒ…","shopId":9972,"skuId":null,"totalPrice":1290,"type":1,"unit":"æ"},{"bizOrderId":69075688785,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1470716960000,"isCombinationItem":null,"isDeleted":0,"itemId":101107259,"itemName":"ã€ä¹°ä¸€èµ ä¸€ã€‘å‰ç¦„èŠ’æœ","itemOriginPrice":990,"itemPicUrl":"n/08/05/1470385635617_5173.jpg","itemPrice":990,"mobile":"15397092749","parentOrderId":42145428785,"property":"çº¦250-300gï¼›ä¹°ä¸€ä¸ªé€ä¸€ä¸ª","shopId":9972,"skuId":null,"totalPrice":990,"type":1,"unit":"ä»½"}],"sysDate":1473240783554,"timeline":[],"totalPrice":2580,"tradeSuccessDatetime":1470761385000,"unit":null,"us2SellerPayBlockedType":null,"us2sellerpayId":null,"us2sellerpayStatus":0,"us2sellerpayTime":null,"validTime":1470716960000,"xiaoErId":1787127,"xiaoErMobile":13764807121,"xiaoErNick":"æ±Ÿç¾Šç¾Š"},{"acceptTime":1469532194000,"addressSnapshot":"5æ ‹1å•å…ƒ 501","area":null,"attributes":"{\"platformCode\":0,\"xiaoErMobile\":13764807121,\"cityName\":\"æ­å·\",\"deliveryName\":\"é™ˆç»ä¼Ÿ\",\"xiaoErId\":1787127,\"confirmTime\":\"2016-07-27 08:03:30\",\"buyerCity\":\"æ­å·\",\"deliveryMobile\":\"18368143539\",\"scFreightCharge\":300,\"confirmDeliveryUser\":\"2085926\",\"platformName\":\"é—ªç”µä¾ \",\"managerMobile\":18768186553,\"sendUser\":\"2085926\",\"deliveryServiceCharge\":200,\"shopCity\":\"æ­å·\",\"confirmDeliveryTime\":\"2016-07-26 20:03:19\",\"deliveryType\":1,\"sendTime\":\"2016-07-26 19:36:25\",\"isPreSale\":false,\"orderMobile\":15397092749,\"acceptUser\":2113754,\"shopType\":1,\"xiaoErNick\":\"æ±Ÿç¾Šç¾Š\",\"deliveryId\":2085926,\"orderNick\":\"meikidd\",\"acceptTime\":\"2016-07-26 19:23:14\",\"shopName\":\"åä¸½è¶…å¸‚\",\"managerId\":1929980,\"confirmUser\":-1,\"managerNick\":\"é»„æ¶¦çƒ½\",\"itemKinds\":4,\"sellerMobile\":18957154818}","bizOrderId":41110122544,"buyAmount":4,"buyer2uspayId":17277855,"buyer2uspayTime":1469532101000,"buyerCity":"æ­å·","buyerId":126402544,"buyerNick":"æ¢…æ™´å…‰","buyerOrderFunds":[],"cancelTime":null,"cancelUser":null,"cancelledBy":null,"cardList":null,"cityCode":330100,"cityName":"æ­å·","comment":"","commissionFee":0,"community":"è¥¿æºªèŠ±å›­ç«èˆŸè‹‘","communityId":null,"confirmDeliveryTime":1469534599000,"confirmedBySystem":null,"customerReminderMark":null,"dailySequence":52,"deductFreightCharge":null,"deliveryCode":6351,"deliveryDeduct":0,"deliveryLogisticsnos":null,"deliveryType":1,"deliveryerMobile":18368143539,"deliveryerName":"é™ˆç»ä¼Ÿ","evalCount":null,"evalExpire":null,"ext":{},"feature":null,"freightCharge":null,"freightChargeFakeReduce":null,"gmtCreate":1469532091000,"groupCurCount":null,"groupDetailUrl":null,"groupFullTime":null,"groupGmtCreate":null,"groupId":null,"groupMin":null,"groupPeopleCount":null,"groupPlanOverTime":null,"groupShareAbstract":null,"groupShareTitle":null,"groupStatus":null,"isAccept":1,"isCanCancelOrder":false,"isCanRefundRequest":false,"isDeleted":0,"isDownloadOrderForLogistics":false,"isOfficialPreSale":false,"isPreSale":false,"isResendOrder":false,"isTryCity":null,"itemId":4560289,"itemName":"ç»¿èŒ¶èœ‚èœœèŒ‰è‰å‘³,å“ˆå¯†ç“œæœåˆ‡,çº¯ç‰›å¥¶,ç»´ç”Ÿç´ é¥®æ–™æ°´èœœæ¡ƒå‘³","itemSumPrice":0,"landmarkId":1214307,"lastOpUserId":-1,"lastOpUserName":null,"logisticsCompanyCodeMap":{},"logisticsCompanyName":null,"logisticsDOList":[],"logisticsNo":null,"logisticsStatus":3,"managerMobile":18768186553,"managerNick":"é»„æ¶¦çƒ½","marketActivityId":null,"mobile":15397092749,"notArriveOnTime":0,"notCountSmallCharge":0,"notSendGoodOnTime":0,"notSendOrderReason":null,"onlinePayType":2,"openid":null,"orderEval":null,"orderFunds":null,"orderMobile":15397092749,"orderNick":"meikidd","orderType":1,"originalPrice":8390,"outOrderId":"201607261921311264025449972","payDeadline":null,"payStatus":2,"payTime":null,"payType":2,"platformCode":0,"platformName":"é—ªç”µä¾ ","preSalePullBackTime":null,"preSaleSendEndTime":null,"preSaleSendStartTime":null,"promotionPrice":8390,"property":null,"psf":0,"reduce":0,"reduceId":0,"refundCount":0,"refundInfo":null,"refundReceived":false,"refundRequestInfo":null,"refundRequestStatus":null,"refundStatus":null,"refundStatusStr":null,"refundSuccessDatetime":null,"rejectReason":null,"rejectValue":null,"reminderMarkCount":null,"scFreightCharge":null,"sellerBenefit":0,"sellerCouponSubsidy":0,"sellerFullReduceSubsidy":0,"sellerMobile":null,"sellerNick":null,"sellerOrderFunds":[],"sellerPackageSubsidy":0,"sellerPsfSubsidy":0,"sellerSpecialSubsidy":0,"sendLogisticsnos":null,"sendTime":1469532985000,"shopCouponId":0,"shopCouponPrice":0,"shopId":9972,"shopName":"åä¸½è¶…å¸‚","shopType":1,"status":4,"subOrders":[{"bizOrderId":66705502544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1469532091000,"isCombinationItem":null,"isDeleted":0,"itemId":2006473,"itemName":"[ä¹ç™¾æ°]ç»´ç”Ÿç´ é¥®æ–™æ°´èœœæ¡ƒå‘³","itemOriginPrice":null,"itemPicUrl":"n/01/23/1453509685322_42.jpg","itemPrice":450,"mobile":"15397092749","parentOrderId":41110122544,"property":"600ml","shopId":9972,"skuId":null,"totalPrice":450,"type":1,"unit":"ç“¶"},{"bizOrderId":66713502544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1469532091000,"isCombinationItem":null,"isDeleted":0,"itemId":100985057,"itemName":"å“ˆå¯†ç“œæœåˆ‡","itemOriginPrice":null,"itemPicUrl":"n/07/20/1468987083123_4310.jpg","itemPrice":990,"mobile":"15397092749","parentOrderId":41110122544,"property":"500g","shopId":9972,"skuId":null,"totalPrice":990,"type":1,"unit":"ä»½"},{"bizOrderId":66714502544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1469532091000,"isCombinationItem":null,"isDeleted":0,"itemId":100779171,"itemName":"[è’™ç‰›]çº¯ç‰›å¥¶","itemOriginPrice":null,"itemPicUrl":"n/12/29/1451369069336_4208.jpg","itemPrice":6500,"mobile":"15397092749","parentOrderId":41110122544,"property":"250ml*24ç›’","shopId":9972,"skuId":null,"totalPrice":6500,"type":1,"unit":"ç®±"},{"bizOrderId":66722502544,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1469532091000,"isCombinationItem":null,"isDeleted":0,"itemId":4560289,"itemName":"[åº·å¸ˆå‚…]ç»¿èŒ¶èœ‚èœœèŒ‰è‰å‘³","itemOriginPrice":null,"itemPicUrl":"n/01/22/1453463069548_8483.jpg","itemPrice":450,"mobile":"15397092749","parentOrderId":41110122544,"property":"1l","shopId":9972,"skuId":null,"totalPrice":450,"type":1,"unit":"ç“¶"}],"sysDate":1473240783554,"timeline":[],"totalPrice":8390,"tradeSuccessDatetime":1469577811000,"unit":null,"us2SellerPayBlockedType":null,"us2sellerpayId":null,"us2sellerpayStatus":0,"us2sellerpayTime":null,"validTime":1469532101000,"xiaoErId":1787127,"xiaoErMobile":13764807121,"xiaoErNick":"æ±Ÿç¾Šç¾Š"},{"acceptTime":1452691138000,"addressSnapshot":"ç½‘å•†è·¯699å·é˜¿é‡Œå·´å·´","area":null,"attributes":"{\"deliveryType\":2,\"cityName\":\"ä¸Šæµ·\",\"sendTime\":\"2016-01-14 09:57:42\",\"itemProperty\":\"6ä¸ªè£…\",\"groupOrderType\":1,\"addressId\":1967222,\"confirmTime\":\"2016-01-17 09:58:00\",\"logisticsNo\":\"806188944984\",\"groupId\":132509,\"buyerCity\":\"æ­å·\",\"marketActivityId\":30,\"logisticsCompanyName\":\"åœ†é€š\",\"acceptTime\":\"2016-01-13 21:18:58\",\"shopName\":\"é—ªç”µè´­æ‹¼å›¢ç›´è¥åº—\",\"shopCity\":\"ä¸Šæµ·\",\"confirmUser\":-1}","bizOrderId":5752714532,"buyAmount":1,"buyer2uspayId":14929499,"buyer2uspayTime":1452689469000,"buyerCity":"æ­å·","buyerId":2634532,"buyerNick":"æ¢…æ™´å…‰","buyerOrderFunds":[],"cancelTime":null,"cancelUser":null,"cancelledBy":null,"cardList":null,"cityCode":330100,"cityName":"ä¸Šæµ·","comment":null,"commissionFee":0,"community":"æ»¨æ±ŸåŒº","communityId":null,"confirmDeliveryTime":null,"confirmedBySystem":null,"customerReminderMark":null,"dailySequence":1021,"deductFreightCharge":null,"deliveryCode":0,"deliveryDeduct":0,"deliveryLogisticsnos":null,"deliveryType":2,"deliveryerMobile":null,"deliveryerName":null,"evalCount":null,"evalExpire":null,"ext":{},"feature":null,"freightCharge":null,"freightChargeFakeReduce":null,"gmtCreate":1452689459000,"groupCurCount":null,"groupDetailUrl":null,"groupFullTime":null,"groupGmtCreate":null,"groupId":132509,"groupMin":null,"groupPeopleCount":null,"groupPlanOverTime":null,"groupShareAbstract":null,"groupShareTitle":null,"groupStatus":null,"isAccept":1,"isCanCancelOrder":false,"isCanRefundRequest":false,"isDeleted":0,"isDownloadOrderForLogistics":false,"isOfficialPreSale":false,"isPreSale":false,"isResendOrder":false,"isTryCity":null,"itemId":4560372,"itemName":"èµ£å—å¸¦å¶è„æ©™85# å•æœé‡é‡çº¦240g-280g åŒ…é‚®","itemSumPrice":0,"landmarkId":-1,"lastOpUserId":-1,"lastOpUserName":null,"logisticsCompanyCodeMap":{"806188944984":1004},"logisticsCompanyName":"åœ†é€š","logisticsDOList":[{"company":1004,"companyName":"åœ†é€š","isRe":0,"logisticsNo":"806188944984","status":null}],"logisticsNo":null,"logisticsStatus":2,"managerMobile":null,"managerNick":null,"marketActivityId":30,"mobile":15397092749,"notArriveOnTime":0,"notCountSmallCharge":0,"notSendGoodOnTime":0,"notSendOrderReason":null,"onlinePayType":3,"openid":"oRnH4jvl9uwpBLUUvEJzU9XQdgZI","orderEval":null,"orderFunds":null,"orderMobile":null,"orderNick":"ğŸŒ´kimi","orderType":2,"originalPrice":1990,"outOrderId":"20160113205059263453213481","payDeadline":null,"payStatus":2,"payTime":null,"payType":2,"platformCode":null,"platformName":null,"preSalePullBackTime":null,"preSaleSendEndTime":null,"preSaleSendStartTime":null,"promotionPrice":990,"property":null,"psf":0,"reduce":0,"reduceId":0,"refundCount":0,"refundInfo":null,"refundReceived":false,"refundRequestInfo":null,"refundRequestStatus":null,"refundStatus":null,"refundStatusStr":null,"refundSuccessDatetime":null,"rejectReason":null,"rejectValue":null,"reminderMarkCount":null,"scFreightCharge":null,"sellerBenefit":0,"sellerCouponSubsidy":0,"sellerFullReduceSubsidy":0,"sellerMobile":null,"sellerNick":null,"sellerOrderFunds":[],"sellerPackageSubsidy":0,"sellerPsfSubsidy":0,"sellerSpecialSubsidy":0,"sendLogisticsnos":null,"sendTime":1452736662000,"shopCouponId":0,"shopCouponPrice":0,"shopId":13481,"shopName":"é—ªç”µè´­æ‹¼å›¢ç›´è¥åº—","shopType":0,"status":4,"subOrders":[{"bizOrderId":6719964532,"buyAmount":1,"combinationItemInfo":[],"communityId":null,"gmtCreate":1452689459000,"isCombinationItem":null,"isDeleted":null,"itemId":4560372,"itemName":"èµ£å—å¸¦å¶è„æ©™85# å•æœé‡é‡çº¦240g-280g åŒ…é‚®","itemOriginPrice":null,"itemPicUrl":"n/01/04/1451912529385_7757.jpg","itemPrice":1990,"mobile":"15397092749","parentOrderId":5752714532,"property":"6ä¸ªè£…","shopId":13481,"skuId":null,"totalPrice":990,"type":null,"unit":""}],"sysDate":1473240783554,"timeline":[],"totalPrice":990,"tradeSuccessDatetime":1452995881000,"unit":null,"us2SellerPayBlockedType":null,"us2sellerpayId":null,"us2sellerpayStatus":0,"us2sellerpayTime":null,"validTime":1452689469000,"xiaoErId":null,"xiaoErMobile":null,"xiaoErNick":null}],"message":"å¤„ç†æˆåŠŸï¼","responseCode":1,"status":true,"timestamp":1473240783552};
      if (json.entry && json.entry.length) {
        this.setState({
          ...this.state,
          loading: false,
          error: '',
          orders: json.entry,
          expandId: (this.props.callingNo) ? json.entry[0].bizOrderId : 0,
          pagination: {
            pageNum: pagination.pageNum,
            pageSize: pagination.pageSize,
            totalItem: json.totalRecordSize || (100 + Math.floor(Math.random() * 30)),
          },
        });
      } else {
        this.setState({ error: 'emptyResult'});
      }
    });
  }
  // é”™è¯¯ä¿¡æ¯å±•ç¤º
  renderError() {
    const error = this.state.error;
    let message = <Alert showIcon description='æŸ¥è¯¢å‡ºé”™ï¼Œè¯·é‡è¯•' message="æŸ¥è¯¢å‡ºé”™" type="error" />;
    if (this.state.error === 'pleaseSearch') { // åˆå§‹çŠ¶æ€åˆ—è¡¨ä¸ºç©ºï¼Œæç¤ºâ€œè¯·è¾“å…¥ç”µè¯å·ç æˆ–è®¢å•IDâ€
      message = <Alert showIcon description='è¯·è¾“å…¥æ‰‹æœºå·æˆ–è®¢å•IDè¿›è¡ŒæŸ¥è¯¢' message="æŸ¥è¯¢" type="info" />;
    } else if (error === 'emptyResult') {
      message = <Alert showIcon description='æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œè¯·é‡æ–°è¾“å…¥è¿›è¡ŒæŸ¥è¯¢' message="ç»“æœä¸ºç©º" type="warning" />;
    } else if(error === 'paramsError') {
      message = <Alert showIcon description='æŸ¥è¯¢å‚æ•°æœ‰è¯¯ï¼Œæ‰‹æœºå·ç æˆ–è®¢å•idä¸èƒ½ä¸ºç©ºï¼Œè¯·é‡æ–°è¾“å…¥' message="æŸ¥è¯¢å‡ºé”™" type="error" />;
    }
    return <div className="order-list-error">{message}</div>;
  }

  // æ¸²æŸ“è®¢å•åˆ—è¡¨
  renderList() {
    const pagination = this.state.pagination;
    return (<div>
      {this.state.orders.map(order => {
        return (<OrderCard
          key={order.bizOrderId}
          order={order}
          isExpand={this.state.expandId === order.bizOrderId}
          expand={id => this.expandChange(id)}
        />);
      })}

      {
        this.state.orders.length
        ? (<Pagination
          className="float-right"
          defaultCurrent={1}
          current={pagination.pageNum}
          pageSize={pagination.pageSize}
          total={pagination.totalItem}
          showTotal={total => `å…±${pagination.totalItem}æ¡`}
          showSizeChanger={!this.props.callingNo}
          pageSizeOptions={['3', '5', '10', '20']}
          showQuickJumper
          onShowSizeChange={(pageNum, pageSize) => this.pageSizeChange(pageNum, pageSize)}
          onChange={pageNum => this.pageNumChange(pageNum)}
        />)
        : null
      }
    </div>);
  }
  render() {
    const pagination = this.state.pagination;

    return (<div className="order-list">
      <Spin spinning={this.state.loading}>
        <Select className="order-search-slt" defaultValue={this.state.mobileType} onChange={value => this.mobileTypeChange(value)}>
          <Option value="mobile">æ”¶ä»¶äººæ‰‹æœº</Option>
          <Option value="orderMobile">ä¸‹å•äººæ‰‹æœº</Option>
        </Select>
        <Input className="order-search-ipt" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" value={this.state.mobileNo} onChange={event => this.mobileNoChange(event)} />
        <Select className="order-search-slt" defaultValue={this.state.orderType} onChange={value => this.orderTypeChange(value)}>
          <Option value="bizOrderId">è®¢å•ID</Option>
          <Option value="outWayId">å¤–éƒ¨è®¢å•ID</Option>
        </Select>
        <Input className="order-search-ipt" placeholder="è¯·è¾“å…¥è®¢å•ID" onChange={event => this.orderNoChange(event)} />
        <Button className="order-search-btn" type="primary" onClick={() => this.pageNumChange(1)}>æŸ¥è¯¢</Button>
        {this.state.error ? this.renderError() : this.renderList()}
      </Spin>
    </div>);
  }
}
